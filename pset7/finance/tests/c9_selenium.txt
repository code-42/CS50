NOTES getting selenium working on Cloud9

sudo apt-get install firefox xvfb
xvfb-run firefox -screenshot https://developer.mozilla.com
xvfb-run python3 test_finance.py

C.UTF-8: not a valid language tag
https://github.com/uncss/uncss/issues/166
LC_ALL=C

export MOZ_CRASHREPORTER_SHUTDOWN=1

https://askubuntu.com/questions/746413/trying-to-install-java-8-unable-to-locate-package-openjdk-8-jre
java -jar /home/ubuntu/bin/selenium-server-standalone-2.51.0.jar

http://edwd42-cs50-code42.c9users.io:8080/

# app.run(host=os.getenv('IP', '0.0.0.0'), port=int(os.getenv('PORT', 8080)))



Testing my CS50 code on Cloud9 has been elusive up until now.  I finally put enough effort into unlocking the mystery of implementing Selenium and TDD on Cloud9 with Python & Flask in the CS50 IDE.  For your benefit, I am detailing here the steps required to implement Selenium on Cloud9 IDE with Firefox, so you can test your code as you learn both coding and Test Driven Development.  I am implementing it with Firefox because I tried to install Chrome and ChromeDriver but ran into multiple issues, but I will attempt it again in the near future.  For now, I first want to get this page posted and deal with Chrome later.

To be certain, though, TDD is not part of the CS50 assignments, and you need to consider that when you submit your CS50 assignments.  I haven't got that far yet, and I do not know how my test.py will affect submit50. Just sayin'.

Please let me know of your successes as well as your problems with these instructions.  I'd like to know if any of you are actually completing your CS50 assignments the TDD way.  If you find any errors in this post, please let me know, and I will immediately make the necessary corrections.  I don't want to make someone's Cloud9 CS50 stop working, so please don't blame me if you hose your system.  You must be comfortable with Linux before attempting these instructions.  Please note, these instructions worked for me - your mileage may vary.

First, you need to install Selenium.  Open a terminal and run:

sudo apt-get update
sudo apt-get install python-pip
sudo pip install selenium

Next, you need to install Firefox and xvfb;
sudo apt-get install firefox xvfb

You also need to install geckodriver.  Go to https://github.com/mozilla/geckodriver/releases and download the latest version, which at the time of this writing was geckodriver-v0.22.0-linux64.tar.gz.  Note that at this time, Cloud9 OS is Ubuntu 14.04 and support for that version is dwindling, so you will have to consider that if you run into issues and wander off researching the problem and find yourself so far down some rabbit hole, you have to ask Alice for directions!

Unzip geckodriver-v0.22.0-linux64.tar.gz and move it to a folder in your PATH.
mv geckodriver /home/ubuntu/bin/geckodriver

I also needed to change ownership to ubuntu:
sudo chown ubuntu:ubuntu /home/ubuntu/bin/geckodriver

And make it executable:
sudo chmod 755 /home/ubuntu/bin/geckodriver

I added a tests folder and put my test.py scripts in there, so my path to test.py is:
~/workspace/cs50/pset7/finance/tests/test.py

Then you can run your flask application with xvfb:
cd tests
xvfb-run python3 test.py

One last thing: the only way I could get pset7 and pset8 to run with test.py was to add the full  path to finance.db in application.py.
# Configure CS50 Library to use SQLite database
# db = SQL("sqlite:///finance.db")
db = SQL("sqlite:////home/ubuntu/workspace/cs50/pset7/finance/finance.db")

Then, I needed to append the path to application.py which is in the parent folder of tests.  Add these lines at the top of test.py:
import os, sys
sys.path.append(os.path.abspath(os.path.join(os.path.dirname(__file__), '..')))
basedir = os.path.abspath(os.path.dirname(__file__))

I will be writing more about TDD in the coming weeks, so stay tuned for tips on running tests for your CS50 assignments.
